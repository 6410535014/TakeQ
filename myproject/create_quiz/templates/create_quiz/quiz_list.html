{% extends "base.html" %}
{% block title %}<title>My Quizzes</title>{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center">
  <h2>My quizzes</h2>
  <a class="btn btn-primary" href="{% url 'create_quiz:quiz_create' %}">Create Quiz</a>
</div>
<hr>

{% for quiz in quizzes %}
  <div class="card my-2">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <h5>{{ quiz.title }}</h5>
        <p class="mb-1">{{ quiz.description|truncatechars:120 }}</p>
        <small>Created: {{ quiz.created_at|date:"Y-m-d" }}</small>
      </div>
      <div>
        <a class="btn btn-sm btn-outline-secondary" href="{% url 'create_quiz:quiz_detail' quiz.pk %}">Open</a>
        <a class="btn btn-sm btn-primary" href="{% url 'create_quiz:quiz_edit' quiz.pk %}">Edit</a>
        {% if quiz.creator == user %}
          <form method="post"
                action="{% url 'create_quiz:quiz_delete' quiz.pk %}"
                style="display:inline"
                onsubmit="return confirm('Are you sure you want to delete this quiz?');">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-danger">Delete</button>
          </form>
        {% endif %}
      </div>
    </div>
  </div>
{% empty %}
  <p>No quizzes yet.</p>
{% endfor %}
{% endblock %}
